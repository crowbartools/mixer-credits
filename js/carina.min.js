!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.carina=e():t.carina=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}i(n(1)),i(n(3)),i(n(2))},function(t,e,n){"use strict";var i=n(2),r=function(){function t(t){var e=this;void 0===t&&(t={}),this.waiting={},this.subscriptions=[],this.socket=new i.ConstellationSocket(t),this.socket.on("open",function(){e.subscriptions.length>0&&e.socket.execute("livesubscribe",{events:e.subscriptions})})}return Object.defineProperty(t,"WebSocket",{get:function(){return i.ConstellationSocket.WebSocket},set:function(t){i.ConstellationSocket.WebSocket=t},enumerable:!0,configurable:!0}),t.prototype.setOptions=function(t){this.socket.setOptions(t)},t.prototype.open=function(){return this.socket.connect(),this},t.prototype.close=function(){this.socket.close()},t.prototype.subscribe=function(t,e){var n=this;return this.socket.on("event:live",function(n){n.channel===t&&e(n.payload)}),this.waitFor("subscription:"+t,function(){return n.socket.execute("livesubscribe",{events:[t]}).then(function(e){return n.subscriptions.push(t),e})})["catch"](function(e){throw n.stopWaiting("subscription:"+t),e})},t.prototype.unsubscribe=function(t){var e=this;return this.stopWaiting("subscription:"+t),this.socket.execute("liveunsubscribe",{events:[t]}).then(function(n){var i=e.subscriptions.indexOf(t);return i>-1&&e.subscriptions.splice(i,1),n})},t.prototype.waitFor=function(t,e){return this.waiting[t]?this.waiting[t]:this.waiting[t]=e()},t.prototype.stopWaiting=function(t){delete this.waiting[t]},t}();e.Carina=r},function(t,e,n){"use strict";function i(){return{url:"wss://constellation.beam.pro",userAgent:"Carina "+d.version,replyTimeout:1e4,isBot:!1,gzip:new f(1024),autoReconnect:!0,reconnectionPolicy:new a.ExponentialReconnectionPolicy,pingInterval:1e4}}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(3),a=n(4),o=n(5),h=n(6),l=n(7),u=n(8),c=n(11),d=n(27),f=function(){function t(t){this.threshold=t}return t.prototype.shouldZip=function(t,e){return t.length>this.threshold},t}();e.SizeThresholdGzipDetector=f,function(t){t[t.Idle=1]="Idle",t[t.Connecting=2]="Connecting",t[t.Connected=3]="Connected",t[t.Closing=4]="Closing",t[t.Reconnecting=5]="Reconnecting",t[t.Refreshing=6]="Refreshing"}(e.State||(e.State={}));var _=e.State,p=function(t){function e(n){var i=this;if(void 0===n&&(n={}),t.call(this),this.queue=new Set,this.setMaxListeners(1/0),this.setOptions(n),void 0===e.WebSocket)throw new Error("Cannot find a websocket implementation; please provide one by running ConstellationSocket.WebSocket = myWebSocketModule;");this.on("message",function(t){return i.extractMessage(t.data)}),this.on("open",function(){return i.schedulePing()}),this.on("event:hello",function(){i.options.reconnectionPolicy.reset(),i.state=_.Connected,i.queue.forEach(function(t){return i.send(t)})}),this.on("close",function(t){return i.state===_.Refreshing?(i.state=_.Idle,void i.connect()):i.state!==_.Closing&&i.options.autoReconnect?(i.state=_.Reconnecting,void(i.reconnectTimeout=setTimeout(function(){i.connect()},i.options.reconnectionPolicy.next()))):void(i.state=_.Idle)})}return r(e,t),e.prototype.setOptions=function(t){if(this.options=Object.assign({},this.options||i(),t),this.options.jwt&&this.options.authToken)throw new Error("Cannot connect to Constellation with both JWT and OAuth token.")},e.prototype.connect=function(){var t=this;if(this.state===_.Closing)return void(this.state=_.Refreshing);var n=this.options.gzip?"cnstl-gzip":"cnstl",i={headers:{"User-Agent":this.options.userAgent,"X-Is-Bot":this.options.isBot}},r=this.options.url;return this.options.authToken?i.headers.Authorization="Bearer "+this.options.authToken:this.options.jwt&&(r+="?"+u.stringify({jwt:this.options.jwt})),this.socket=new e.WebSocket(r,n,i),this.socket.binaryType="arraybuffer",this.state=_.Connecting,this.rebroadcastEvent("open"),this.rebroadcastEvent("close"),this.rebroadcastEvent("message"),this.socket.addEventListener("error",function(e){t.state===_.Closing?t.emit("close"):t.emit("error",e)}),this},e.prototype.getState=function(){return this.state},e.prototype.close=function(){return this.state===_.Reconnecting?(clearTimeout(this.reconnectTimeout),void(this.state=_.Idle)):(this.state=_.Closing,this.socket.close(),this.queue.forEach(function(t){return t.cancel()}),void this.queue.clear())},e.prototype.execute=function(t,e){return void 0===e&&(e={}),this.send(new h.Packet(t,e))},e.prototype.send=function(t){var e=this;if(t.getState()===h.PacketState.Cancelled)return Promise.reject(new s.CancelledError);if(this.queue.add(t),this.state!==_.Connected)return Promise.race([l.resolveOn(t,"send"),l.resolveOn(t,"cancel").then(function(){throw new s.CancelledError})]);var n=t.getTimeout(this.options.replyTimeout),i=Promise.race([l.resolveOn(this,"reply:"+t.id(),n).then(function(n){if(e.queue["delete"](t),n.err)throw n.err;return n.result})["catch"](function(n){throw e.queue["delete"](t),n}),l.resolveOn(t,"cancel",n+1).then(function(){throw new s.CancelledError}),l.resolveOn(this,"close",n+1).then(function(){if(e.queue.has(t))return t.setState(h.PacketState.Pending),e.send(t)})]);return t.emit("send",i),t.setState(h.PacketState.Sending),this.sendPacketInner(t),i},e.prototype.sendPacketInner=function(t){var e=JSON.stringify(t),n=this.options.gzip.shouldZip(e,t.toJSON())?c.gzip(e):e;this.emit("send",n),this.socket.send(n)},e.prototype.extractMessage=function(t){var e;e="string"!=typeof t?c.ungzip(t,{to:"string"}):t;var n;try{n=JSON.parse(e)}catch(i){throw new s.MessageParseError("Message returned was not valid JSON")}switch(this.schedulePing(),n.type){case"event":this.emit("event:"+n.event,n.data);break;case"reply":var i=n.error?s.ConstellationError.from(n.error):null;this.emit("reply:"+n.id,{err:i,result:n.result});break;default:throw new s.MessageParseError('Unknown message type "'+n.type+'"')}},e.prototype.rebroadcastEvent=function(t){var e=this;this.socket.addEventListener(t,function(n){return e.emit(t,n)})},e.prototype.schedulePing=function(){var t=this;clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(function(){if(t.state===_.Connected){var e=new h.Packet("ping",null),n=t.options.replyTimeout;return setTimeout(function(){t.sendPacketInner(e),t.emit("ping")}),Promise.race([l.resolveOn(t,"reply:"+e.id(),n),l.resolveOn(t,"close",n+1)]).then(function(){return t.emit("pong")})["catch"](function(e){return t.socket.close()})}},this.options.pingInterval)},e.WebSocket="undefined"==typeof WebSocket?null:WebSocket,e}(o.EventEmitter);e.ConstellationSocket=p},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e){t.call(this,e),this.message=e}return n(e,t),e}(Error);e.BaseError=i;var r=function(t){function e(){t.call(this,"Packet was cancelled or Carina was closed before a reply was received.")}return n(e,t),e}(i);e.CancelledError=r;var s=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(i);e.TimeoutError=s;var a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(i);e.MessageParseError=a;var o;!function(t){function e(t){var e=t.code,n=t.message;return s[e]?new s[e](n):new r(e,n)}var r=function(t){function e(e,n){t.call(this,n),this.code=e}return n(e,t),e}(i);t.Base=r;var s={};t.from=e;var a=function(t){function e(e){t.call(this,4e3,e)}return n(e,t),e}(r);t.InvalidPayload=a,s[4e3]=a;var o=function(t){function e(e){t.call(this,4001,e)}return n(e,t),e}(r);t.PayloadDecompression=o,s[4001]=o;var h=function(t){function e(e){t.call(this,4002,e)}return n(e,t),e}(r);t.UnknownPacketType=h,s[4002]=h;var l=function(t){function e(e){t.call(this,4003,e)}return n(e,t),e}(r);t.UnknownMethodName=l,s[4003]=l;var u=function(t){function e(e){t.call(this,4004,e)}return n(e,t),e}(r);t.InvalidMethodArguments=u,s[4004]=u;var c=function(t){function e(e){t.call(this,4005,e)}return n(e,t),e}(r);t.SessionExpired=c,s[4005]=c;var d=function(t){function e(e){t.call(this,4100,e)}return n(e,t),e}(r);t.LiveUnknownEvent=d,s[4100]=d;var f=function(t){function e(e){t.call(this,4101,e)}return n(e,t),e}(r);t.LiveAccessDenied=f,s[4101]=f;var _=function(t){function e(e){t.call(this,4102,e)}return n(e,t),e}(r);t.LiveAlreadySubscribed=_,s[4102]=_;var p=function(t){function e(e){t.call(this,4103,e)}return n(e,t),e}(r);t.LiveNotSubscribed=p,s[4103]=p}(o=e.ConstellationError||(e.ConstellationError={}))},function(t,e){"use strict";var n=function(){function t(t,e){void 0===t&&(t=2e4),void 0===e&&(e=500),this.maxDelay=t,this.baseDelay=e,this.retries=0}return t.prototype.next=function(){return Math.min(this.maxDelay,(1<<this.retries++)*this.baseDelay)},t.prototype.reset=function(){this.retries=0},t}();e.ExponentialReconnectionPolicy=n},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,o,h,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,h=0;h<r;h++)l[h].apply(this,o);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,a,o;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(o=a;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){r=o;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(5);!function(t){t[t.Pending=1]="Pending",t[t.Sending=2]="Sending",t[t.Replied=3]="Replied",t[t.Cancelled=4]="Cancelled"}(e.PacketState||(e.PacketState={}));var s=e.PacketState,a=4294967295,o=function(t){function e(e,n){t.call(this),this.method=e,this.params=n,this.state=s.Pending,this.data={id:Math.floor(Math.random()*a),type:"method",method:e,params:n}}return i(e,t),e.prototype.id=function(){return this.data.id},e.prototype.cancel=function(){this.emit("cancel"),this.setState(s.Cancelled)},e.prototype.toJSON=function(){return this.data},e.prototype.setTimeout=function(t){this.timeout=t},e.prototype.getTimeout=function(t){return this.timeout||t},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){t!==this.state&&(this.state=t)},e}(r.EventEmitter);e.Packet=o;var h=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(o);e.Call=h},function(t,e,n){"use strict";function i(t,e,n){return void 0===n&&(n=12e4),new Promise(function(i,r){var a=!1,o=function(t){a=!0,i(t)};t.once(e,o),setTimeout(function(){a||(t.removeListener(e,o),r(new s.TimeoutError("Expected to get event "+e)))},n)})}function r(t,e){var n=new s.TimeoutError(t);return new Promise(function(t,i){setTimeout(function(){return i(n)},e)})}var s=n(3);e.resolveOn=i,e.timeout=r},function(t,e,n){"use strict";e.decode=e.parse=n(9),e.encode=e.stringify=n(10)},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,r){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var o=1e3;r&&"number"==typeof r.maxKeys&&(o=r.maxKeys);var h=t.length;o>0&&h>o&&(h=o);for(var l=0;l<h;++l){var u,c,d,f,_=t[l].replace(a,"%20"),p=_.indexOf(i);p>=0?(u=_.substr(0,p),c=_.substr(p+1)):(u=_,c=""),d=decodeURIComponent(u),f=decodeURIComponent(c),n(s,d)?Array.isArray(s[d])?s[d].push(f):s[d]=[s[d],f]:s[d]=f}return s}},function(t,e){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,r){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(r){var s=encodeURIComponent(n(r))+i;return Array.isArray(t[r])?t[r].map(function(t){return s+encodeURIComponent(n(t))}).join(e):s+encodeURIComponent(n(t[r]))}).join(e):r?encodeURIComponent(n(r))+i+encodeURIComponent(n(t)):""}},function(t,e,n){"use strict";var i=n(12).assign,r=n(13),s=n(21),a=n(25),o={};i(o,r,s,a),t.exports=o},function(t,e){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)return void t.set(e.subarray(n,n+i),r);for(var s=0;s<i;s++)t[r+s]=e[n+s]},flattenChunks:function(t){var e,n,i,r,s,a;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(a=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)s=t[e],a.set(s,r),r+=s.length;return a}},r={arraySet:function(t,e,n,i,r){for(var s=0;s<i;s++)t[r+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,r))},e.setTyped(n)},function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=h.assign({level:m,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==p)throw new Error(u[n]);if(e.header&&o.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===d.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=o.deflateSetDictionary(this.strm,r),n!==p)throw new Error(u[n]);this._dict_set=!0}}function r(t,e){var n=new i(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}function s(t,e){return e=e||{},e.raw=!0,r(t,e)}function a(t,e){return e=e||{},e.gzip=!0,r(t,e)}var o=n(14),h=n(12),l=n(19),u=n(18),c=n(20),d=Object.prototype.toString,f=0,_=4,p=0,v=1,g=2,m=-1,b=0,w=8;i.prototype.push=function(t,e){var n,i,r=this.strm,s=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:e===!0?_:f,"string"==typeof t?r.input=l.string2buf(t):"[object ArrayBuffer]"===d.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new h.Buf8(s),r.next_out=0,r.avail_out=s),n=o.deflate(r,i),n!==v&&n!==p)return this.onEnd(n),this.ended=!0,!1;0!==r.avail_out&&(0!==r.avail_in||i!==_&&i!==g)||("string"===this.options.to?this.onData(l.buf2binstring(h.shrinkBuf(r.output,r.next_out))):this.onData(h.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&n!==v);return i===_?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===p):i!==g||(this.onEnd(p),r.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=i,e.deflate=r,e.deflateRaw=s,e.gzip=a},function(t,e,n){"use strict";function i(t,e){return t.msg=I[e],e}function r(t){return(t<<1)-(t>4?9:0)}function s(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(O.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function o(t,e){R._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function h(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function u(t,e,n,i){var r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,O.arraySet(e,t.input,t.next_in,r,n),1===t.state.wrap?t.adler=L(t.adler,e,r,n):2===t.state.wrap&&(t.adler=T(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)}function c(t,e){var n,i,r=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,l=t.window,u=t.w_mask,c=t.prev,d=t.strstart+ut,f=l[s+a-1],_=l[s+a];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do if(n=e,l[n+a]===_&&l[n+a-1]===f&&l[n]===l[s]&&l[++n]===l[s+1]){s+=2,n++;do;while(l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&s<d);if(i=ut-(d-s),s=d-ut,i>a){if(t.match_start=e,a=i,i>=o)break;f=l[s+a-1],_=l[s+a]}}while((e=c[e&u])>h&&0!==--r);return a<=t.lookahead?a:t.lookahead}function d(t){var e,n,i,r,s,a=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-ct)){O.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,n=t.hash_size,e=n;do i=t.head[--e],t.head[e]=i>=a?i-a:0;while(--n);n=a,e=n;do i=t.prev[--e],t.prev[e]=i>=a?i-a:0;while(--n);r+=a}if(0===t.strm.avail_in)break;if(n=u(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=lt)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+lt-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<lt)););}while(t.lookahead<ct&&0!==t.strm.avail_in)}function f(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(d(t),0===t.lookahead&&e===P)return wt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,o(t,!1),0===t.strm.avail_out))return wt;if(t.strstart-t.block_start>=t.w_size-ct&&(o(t,!1),0===t.strm.avail_out))return wt}return t.insert=0,e===U?(o(t,!0),0===t.strm.avail_out?yt:xt):t.strstart>t.block_start&&(o(t,!1),0===t.strm.avail_out)?wt:wt}function _(t,e){for(var n,i;;){if(t.lookahead<ct){if(d(t),t.lookahead<ct&&e===P)return wt;if(0===t.lookahead)break}if(n=0,t.lookahead>=lt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+lt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-ct&&(t.match_length=c(t,n)),t.match_length>=lt)if(i=R._tr_tally(t,t.strstart-t.match_start,t.match_length-lt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=lt){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+lt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=R._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(o(t,!1),0===t.strm.avail_out))return wt}return t.insert=t.strstart<lt-1?t.strstart:lt-1,e===U?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?wt:kt}function p(t,e){for(var n,i,r;;){if(t.lookahead<ct){if(d(t),t.lookahead<ct&&e===P)return wt;if(0===t.lookahead)break}if(n=0,t.lookahead>=lt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+lt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=lt-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-ct&&(t.match_length=c(t,n),t.match_length<=5&&(t.strategy===q||t.match_length===lt&&t.strstart-t.match_start>4096)&&(t.match_length=lt-1)),t.prev_length>=lt&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-lt,i=R._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-lt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+lt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=lt-1,t.strstart++,i&&(o(t,!1),0===t.strm.avail_out))return wt}else if(t.match_available){if(i=R._tr_tally(t,0,t.window[t.strstart-1]),i&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return wt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=R._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<lt-1?t.strstart:lt-1,e===U?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?wt:kt}function v(t,e){for(var n,i,r,s,a=t.window;;){if(t.lookahead<=ut){if(d(t),t.lookahead<=ut&&e===P)return wt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=lt&&t.strstart>0&&(r=t.strstart-1,i=a[r],i===a[++r]&&i===a[++r]&&i===a[++r])){s=t.strstart+ut;do;while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<s);t.match_length=ut-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=lt?(n=R._tr_tally(t,1,t.match_length-lt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=R._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(o(t,!1),0===t.strm.avail_out))return wt}return t.insert=0,e===U?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?wt:kt}function g(t,e){for(var n;;){if(0===t.lookahead&&(d(t),0===t.lookahead)){if(e===P)return wt;break}if(t.match_length=0,n=R._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(o(t,!1),0===t.strm.avail_out))return wt}return t.insert=0,e===U?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?wt:kt}function m(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function b(t){t.window_size=2*t.w_size,s(t.head),t.max_lazy_match=A[t.level].max_lazy,t.good_match=A[t.level].good_length,t.nice_match=A[t.level].nice_length,t.max_chain_length=A[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=lt-1,t.match_available=0,t.ins_h=0}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=V,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new O.Buf16(2*ot),this.dyn_dtree=new O.Buf16(2*(2*st+1)),this.bl_tree=new O.Buf16(2*(2*at+1)),s(this.dyn_ltree),s(this.dyn_dtree),s(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new O.Buf16(ht+1),this.heap=new O.Buf16(2*rt+1),s(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new O.Buf16(2*rt+1),s(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Q,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ft:mt,t.adler=2===e.wrap?0:1,e.last_flush=P,R._tr_init(e),D):i(t,F)}function y(t){var e=k(t);return e===D&&b(t.state),e}function x(t,e){return t&&t.state?2!==t.state.wrap?F:(t.state.gzhead=e,D):F}function z(t,e,n,r,s,a){if(!t)return F;var o=1;if(e===K&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),s<1||s>$||n!==V||r<8||r>15||e<0||e>9||a<0||a>G)return i(t,F);8===r&&(r=9);var h=new w;return t.state=h,h.strm=t,h.wrap=o,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+lt-1)/lt),h.window=new O.Buf8(2*h.w_size),h.head=new O.Buf16(h.hash_size),h.prev=new O.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new O.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=a,h.method=n,y(t)}function S(t,e){return z(t,e,V,tt,et,X)}function E(t,e){var n,o,u,c;if(!t||!t.state||e>j||e<0)return t?i(t,F):F;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===bt&&e!==U)return i(t,0===t.avail_out?W:F);if(o.strm=t,n=o.last_flush,o.last_flush=e,o.status===ft)if(2===o.wrap)t.adler=0,h(o,31),h(o,139),h(o,8),o.gzhead?(h(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),h(o,255&o.gzhead.time),h(o,o.gzhead.time>>8&255),h(o,o.gzhead.time>>16&255),h(o,o.gzhead.time>>24&255),h(o,9===o.level?2:o.strategy>=J||o.level<2?4:0),h(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(h(o,255&o.gzhead.extra.length),h(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=T(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=_t):(h(o,0),h(o,0),h(o,0),h(o,0),h(o,0),h(o,9===o.level?2:o.strategy>=J||o.level<2?4:0),h(o,zt),o.status=mt);else{var d=V+(o.w_bits-8<<4)<<8,f=-1;f=o.strategy>=J||o.level<2?0:o.level<6?1:6===o.level?2:3,d|=f<<6,0!==o.strstart&&(d|=dt),d+=31-d%31,o.status=mt,l(o,d),0!==o.strstart&&(l(o,t.adler>>>16),l(o,65535&t.adler)),t.adler=1}if(o.status===_t)if(o.gzhead.extra){for(u=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>u&&(t.adler=T(t.adler,o.pending_buf,o.pending-u,u)),a(t),u=o.pending,o.pending!==o.pending_buf_size));)h(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>u&&(t.adler=T(t.adler,o.pending_buf,o.pending-u,u)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=pt)}else o.status=pt;if(o.status===pt)if(o.gzhead.name){u=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>u&&(t.adler=T(t.adler,o.pending_buf,o.pending-u,u)),a(t),u=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,h(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>u&&(t.adler=T(t.adler,o.pending_buf,o.pending-u,u)),0===c&&(o.gzindex=0,o.status=vt)}else o.status=vt;if(o.status===vt)if(o.gzhead.comment){u=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>u&&(t.adler=T(t.adler,o.pending_buf,o.pending-u,u)),a(t),u=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,h(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>u&&(t.adler=T(t.adler,o.pending_buf,o.pending-u,u)),0===c&&(o.status=gt)}else o.status=gt;if(o.status===gt&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&a(t),o.pending+2<=o.pending_buf_size&&(h(o,255&t.adler),h(o,t.adler>>8&255),t.adler=0,o.status=mt)):o.status=mt),0!==o.pending){if(a(t),0===t.avail_out)return o.last_flush=-1,D}else if(0===t.avail_in&&r(e)<=r(n)&&e!==U)return i(t,W);if(o.status===bt&&0!==t.avail_in)return i(t,W);if(0!==t.avail_in||0!==o.lookahead||e!==P&&o.status!==bt){var _=o.strategy===J?g(o,e):o.strategy===Y?v(o,e):A[o.level].func(o,e);if(_!==yt&&_!==xt||(o.status=bt),_===wt||_===yt)return 0===t.avail_out&&(o.last_flush=-1),D;if(_===kt&&(e===Z?R._tr_align(o):e!==j&&(R._tr_stored_block(o,0,0,!1),e===N&&(s(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),a(t),0===t.avail_out))return o.last_flush=-1,D}return e!==U?D:o.wrap<=0?M:(2===o.wrap?(h(o,255&t.adler),h(o,t.adler>>8&255),h(o,t.adler>>16&255),h(o,t.adler>>24&255),h(o,255&t.total_in),h(o,t.total_in>>8&255),h(o,t.total_in>>16&255),h(o,t.total_in>>24&255)):(l(o,t.adler>>>16),l(o,65535&t.adler)),a(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?D:M)}function B(t){var e;return t&&t.state?(e=t.state.status,e!==ft&&e!==_t&&e!==pt&&e!==vt&&e!==gt&&e!==mt&&e!==bt?i(t,F):(t.state=null,e===mt?i(t,H):D)):F}function C(t,e){var n,i,r,a,o,h,l,u,c=e.length;if(!t||!t.state)return F;if(n=t.state,a=n.wrap,2===a||1===a&&n.status!==ft||n.lookahead)return F;for(1===a&&(t.adler=L(t.adler,e,c,0)),n.wrap=0,c>=n.w_size&&(0===a&&(s(n.head),
n.strstart=0,n.block_start=0,n.insert=0),u=new O.Buf8(n.w_size),O.arraySet(u,e,c-n.w_size,n.w_size,0),e=u,c=n.w_size),o=t.avail_in,h=t.next_in,l=t.input,t.avail_in=c,t.next_in=0,t.input=e,d(n);n.lookahead>=lt;){i=n.strstart,r=n.lookahead-(lt-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+lt-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--r);n.strstart=i,n.lookahead=lt-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=lt-1,n.match_available=0,t.next_in=h,t.input=l,t.avail_in=o,n.wrap=a,D}var A,O=n(12),R=n(15),L=n(16),T=n(17),I=n(18),P=0,Z=1,N=3,U=4,j=5,D=0,M=1,F=-2,H=-3,W=-5,K=-1,q=1,J=2,Y=3,G=4,X=0,Q=2,V=8,$=9,tt=15,et=8,nt=29,it=256,rt=it+1+nt,st=30,at=19,ot=2*rt+1,ht=15,lt=3,ut=258,ct=ut+lt+1,dt=32,ft=42,_t=69,pt=73,vt=91,gt=103,mt=113,bt=666,wt=1,kt=2,yt=3,xt=4,zt=3;A=[new m(0,0,0,0,f),new m(4,4,8,4,_),new m(4,5,16,8,_),new m(4,6,32,32,_),new m(4,4,16,16,p),new m(8,16,32,32,p),new m(8,16,128,128,p),new m(8,32,128,256,p),new m(32,128,258,1024,p),new m(32,258,258,4096,p)],e.deflateInit=S,e.deflateInit2=z,e.deflateReset=y,e.deflateResetKeep=k,e.deflateSetHeader=x,e.deflate=E,e.deflateEnd=B,e.deflateSetDictionary=C,e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function r(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function s(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return t<256?ht[t]:ht[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function h(t,e,n){t.bi_valid>G-n?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>G-t.bi_valid,t.bi_valid+=n-G):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function l(t,e,n){h(t,n[2*e],n[2*e+1])}function u(t,e){var n=0;do n|=1&t,t>>>=1,n<<=1;while(--e>0);return n>>>1}function c(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function d(t,e){var n,i,r,s,a,o,h=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,c=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,_=e.stat_desc.max_length,p=0;for(s=0;s<=Y;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<J;n++)i=t.heap[n],s=h[2*h[2*i+1]+1]+1,s>_&&(s=_,p++),h[2*i+1]=s,i>l||(t.bl_count[s]++,a=0,i>=f&&(a=d[i-f]),o=h[2*i],t.opt_len+=o*(s+a),c&&(t.static_len+=o*(u[2*i+1]+a)));if(0!==p){do{for(s=_-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[_]--,p-=2}while(p>0);for(s=_;0!==s;s--)for(i=t.bl_count[s];0!==i;)r=t.heap[--n],r>l||(h[2*r+1]!==s&&(t.opt_len+=(s-h[2*r+1])*h[2*r],h[2*r+1]=s),i--)}}function f(t,e,n){var i,r,s=new Array(Y+1),a=0;for(i=1;i<=Y;i++)s[i]=a=a+n[i-1]<<1;for(r=0;r<=e;r++){var o=t[2*r+1];0!==o&&(t[2*r]=u(s[o]++,o))}}function _(){var t,e,n,i,s,a=new Array(Y+1);for(n=0,i=0;i<F-1;i++)for(ut[i]=n,t=0;t<1<<et[i];t++)lt[n++]=i;for(lt[n-1]=i,s=0,i=0;i<16;i++)for(ct[i]=s,t=0;t<1<<nt[i];t++)ht[s++]=i;for(s>>=7;i<K;i++)for(ct[i]=s<<7,t=0;t<1<<nt[i]-7;t++)ht[256+s++]=i;for(e=0;e<=Y;e++)a[e]=0;for(t=0;t<=143;)at[2*t+1]=8,t++,a[8]++;for(;t<=255;)at[2*t+1]=9,t++,a[9]++;for(;t<=279;)at[2*t+1]=7,t++,a[7]++;for(;t<=287;)at[2*t+1]=8,t++,a[8]++;for(f(at,W+1,a),t=0;t<K;t++)ot[2*t+1]=5,ot[2*t]=u(t,5);dt=new r(at,et,H+1,W,Y),ft=new r(ot,nt,0,K,Y),_t=new r(new Array(0),it,0,q,X)}function p(t){var e;for(e=0;e<W;e++)t.dyn_ltree[2*e]=0;for(e=0;e<K;e++)t.dyn_dtree[2*e]=0;for(e=0;e<q;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function v(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function g(t,e,n,i){v(t),i&&(o(t,n),o(t,~n)),L.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function m(t,e,n,i){var r=2*e,s=2*n;return t[r]<t[s]||t[r]===t[s]&&i[e]<=i[n]}function b(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&m(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!m(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function w(t,e,n){var i,r,s,o,u=0;if(0!==t.last_lit)do i=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],r=t.pending_buf[t.l_buf+u],u++,0===i?l(t,r,e):(s=lt[r],l(t,s+H+1,e),o=et[s],0!==o&&(r-=ut[s],h(t,r,o)),i--,s=a(i),l(t,s,n),o=nt[s],0!==o&&(i-=ct[s],h(t,i,o)));while(u<t.last_lit);l(t,Q,e)}function k(t,e){var n,i,r,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=J,n=0;n<h;n++)0!==s[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):s[2*n+1]=0;for(;t.heap_len<2;)r=t.heap[++t.heap_len]=l<2?++l:0,s[2*r]=1,t.depth[r]=0,t.opt_len--,o&&(t.static_len-=a[2*r+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)b(t,s,n);r=h;do n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],b(t,s,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,s[2*r]=s[2*n]+s[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,s[2*n+1]=s[2*i+1]=r,t.heap[1]=r++,b(t,s,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],d(t,e),f(s,l,t.bl_count)}function y(t,e,n){var i,r,s=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=e[2*(i+1)+1],++o<h&&r===a||(o<l?t.bl_tree[2*r]+=o:0!==r?(r!==s&&t.bl_tree[2*r]++,t.bl_tree[2*V]++):o<=10?t.bl_tree[2*$]++:t.bl_tree[2*tt]++,o=0,s=r,0===a?(h=138,l=3):r===a?(h=6,l=3):(h=7,l=4))}function x(t,e,n){var i,r,s=-1,a=e[1],o=0,u=7,c=4;for(0===a&&(u=138,c=3),i=0;i<=n;i++)if(r=a,a=e[2*(i+1)+1],!(++o<u&&r===a)){if(o<c){do l(t,r,t.bl_tree);while(0!==--o)}else 0!==r?(r!==s&&(l(t,r,t.bl_tree),o--),l(t,V,t.bl_tree),h(t,o-3,2)):o<=10?(l(t,$,t.bl_tree),h(t,o-3,3)):(l(t,tt,t.bl_tree),h(t,o-11,7));o=0,s=r,0===a?(u=138,c=3):r===a?(u=6,c=3):(u=7,c=4)}}function z(t){var e;for(y(t,t.dyn_ltree,t.l_desc.max_code),y(t,t.dyn_dtree,t.d_desc.max_code),k(t,t.bl_desc),e=q-1;e>=3&&0===t.bl_tree[2*rt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function S(t,e,n,i){var r;for(h(t,e-257,5),h(t,n-1,5),h(t,i-4,4),r=0;r<i;r++)h(t,t.bl_tree[2*rt[r]+1],3);x(t,t.dyn_ltree,e-1),x(t,t.dyn_dtree,n-1)}function E(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return I;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return P;for(e=32;e<H;e++)if(0!==t.dyn_ltree[2*e])return P;return I}function B(t){pt||(_(),pt=!0),t.l_desc=new s(t.dyn_ltree,dt),t.d_desc=new s(t.dyn_dtree,ft),t.bl_desc=new s(t.bl_tree,_t),t.bi_buf=0,t.bi_valid=0,p(t)}function C(t,e,n,i){h(t,(N<<1)+(i?1:0),3),g(t,e,n,!0)}function A(t){h(t,U<<1,3),l(t,Q,at),c(t)}function O(t,e,n,i){var r,s,a=0;t.level>0?(t.strm.data_type===Z&&(t.strm.data_type=E(t)),k(t,t.l_desc),k(t,t.d_desc),a=z(t),r=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&e!==-1?C(t,e,n,i):t.strategy===T||s===r?(h(t,(U<<1)+(i?1:0),3),w(t,at,ot)):(h(t,(j<<1)+(i?1:0),3),S(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),w(t,t.dyn_ltree,t.dyn_dtree)),p(t),i&&v(t)}function R(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(lt[n]+H+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1}var L=n(12),T=4,I=0,P=1,Z=2,N=0,U=1,j=2,D=3,M=258,F=29,H=256,W=H+1+F,K=30,q=19,J=2*W+1,Y=15,G=16,X=7,Q=256,V=16,$=17,tt=18,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],nt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],it=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],st=512,at=new Array(2*(W+2));i(at);var ot=new Array(2*K);i(ot);var ht=new Array(st);i(ht);var lt=new Array(M-D+1);i(lt);var ut=new Array(F);i(ut);var ct=new Array(K);i(ct);var dt,ft,_t,pt=!1;e._tr_init=B,e._tr_stored_block=C,e._tr_flush_block=O,e._tr_tally=R,e._tr_align=A},function(t,e){"use strict";function n(t,e,n,i){for(var r=65535&t|0,s=t>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do r=r+e[i++]|0,s=s+r|0;while(--a);r%=65521,s%=65521}return r|s<<16|0}t.exports=n},function(t,e){"use strict";function n(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}function i(t,e,n,i){var s=r,a=i+n;t^=-1;for(var o=i;o<a;o++)t=t>>>8^s[255&(t^e[o])];return t^-1}var r=n();t.exports=i},function(t,e){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";function i(t,e){if(e<65537&&(t.subarray&&a||!t.subarray&&s))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}var r=n(12),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(o){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(o){a=!1}for(var h=new r.Buf8(256),l=0;l<256;l++)h[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;h[254]=h[254]=1,e.string2buf=function(t){var e,n,i,s,a,o=t.length,h=0;for(s=0;s<o;s++)n=t.charCodeAt(s),55296===(64512&n)&&s+1<o&&(i=t.charCodeAt(s+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),s++)),h+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(h),a=0,s=0;a<h;s++)n=t.charCodeAt(s),55296===(64512&n)&&s+1<o&&(i=t.charCodeAt(s+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),s++)),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},e.buf2binstring=function(t){return i(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,r,s,a,o=e||t.length,l=new Array(2*o);for(r=0,n=0;n<o;)if(s=t[n++],s<128)l[r++]=s;else if(a=h[s],a>4)l[r++]=65533,n+=a-1;else{for(s&=2===a?31:3===a?15:7;a>1&&n<o;)s=s<<6|63&t[n++],a--;a>1?l[r++]=65533:s<65536?l[r++]=s:(s-=65536,l[r++]=55296|s>>10&1023,l[r++]=56320|1023&s)}return i(l,r)},e.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&128===(192&t[n]);)n--;return n<0?e:0===n?e:n+h[t[n]]>e?n:e}},function(t,e){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=n},function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,e.windowBits);if(n!==l.Z_OK)throw new Error(u[n]);this.header=new d,a.inflateGetHeader(this.strm,this.header)}function r(t,e){var n=new i(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}function s(t,e){return e=e||{},e.raw=!0,r(t,e)}var a=n(22),o=n(12),h=n(19),l=n(25),u=n(18),c=n(20),d=n(26),f=Object.prototype.toString;i.prototype.push=function(t,e){var n,i,r,s,u,c,d=this.strm,_=this.options.chunkSize,p=this.options.dictionary,v=!1;if(this.ended)return!1;i=e===~~e?e:e===!0?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof t?d.input=h.binstring2buf(t):"[object ArrayBuffer]"===f.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new o.Buf8(_),d.next_out=0,d.avail_out=_),n=a.inflate(d,l.Z_NO_FLUSH),n===l.Z_NEED_DICT&&p&&(c="string"==typeof p?h.string2buf(p):"[object ArrayBuffer]"===f.call(p)?new Uint8Array(p):p,n=a.inflateSetDictionary(this.strm,c)),n===l.Z_BUF_ERROR&&v===!0&&(n=l.Z_OK,v=!1),n!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&n!==l.Z_STREAM_END&&(0!==d.avail_in||i!==l.Z_FINISH&&i!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(r=h.utf8border(d.output,d.next_out),s=d.next_out-r,u=h.buf2string(d.output,r),d.next_out=s,d.avail_out=_-s,s&&o.arraySet(d.output,d.output,r,s,0),this.onData(u)):this.onData(o.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(v=!0)}while((d.avail_in>0||0===d.avail_out)&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(i=l.Z_FINISH),i===l.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):i!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),d.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=i,e.inflate=r,e.inflateRaw=s,e.ungzip=r},function(t,e,n){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=N,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new m.Buf32(pt),e.distcode=e.distdyn=new m.Buf32(vt),e.sane=1,e.back=-1,A):L}function a(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,s(t)):L}function o(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15)?L:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,a(t))):L}function h(t,e){var n,i;return t?(i=new r,t.state=i,i.window=null,n=o(t,e),n!==A&&(t.state=null),n):L}function l(t){return h(t,mt)}function u(t){if(bt){var e;for(v=new m.Buf32(512),g=new m.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(y(z,t.lens,0,288,v,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;y(S,t.lens,0,32,g,0,t.work,{bits:5}),bt=!1}t.lencode=v,t.lenbits=9,t.distcode=g,t.distbits=5}function c(t,e,n,i){var r,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new m.Buf8(s.wsize)),i>=s.wsize?(m.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),m.arraySet(s.window,e,n-i,r,s.wnext),i-=r,i?(m.arraySet(s.window,e,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}function d(t,e){var n,r,s,a,o,h,l,d,f,_,p,v,g,pt,vt,gt,mt,bt,wt,kt,yt,xt,zt,St,Et=0,Bt=new m.Buf8(4),Ct=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return L;n=t.state,n.mode===Y&&(n.mode=G),o=t.next_out,s=t.output,l=t.avail_out,a=t.next_in,r=t.input,h=t.avail_in,d=n.hold,f=n.bits,_=h,p=l,xt=A;t:for(;;)switch(n.mode){case N:if(0===n.wrap){n.mode=G;break}for(;f<16;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(2&n.wrap&&35615===d){n.check=0,Bt[0]=255&d,Bt[1]=d>>>8&255,n.check=w(n.check,Bt,2,0),d=0,f=0,n.mode=U;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){t.msg="incorrect header check",n.mode=dt;break}if((15&d)!==Z){t.msg="unknown compression method",n.mode=dt;break}if(d>>>=4,f-=4,yt=(15&d)+8,0===n.wbits)n.wbits=yt;else if(yt>n.wbits){t.msg="invalid window size",n.mode=dt;break}n.dmax=1<<yt,t.adler=n.check=1,n.mode=512&d?q:Y,d=0,f=0;break;case U:for(;f<16;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(n.flags=d,(255&n.flags)!==Z){t.msg="unknown compression method",n.mode=dt;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=dt;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(Bt[0]=255&d,Bt[1]=d>>>8&255,n.check=w(n.check,Bt,2,0)),d=0,f=0,n.mode=j;case j:for(;f<32;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}n.head&&(n.head.time=d),512&n.flags&&(Bt[0]=255&d,Bt[1]=d>>>8&255,Bt[2]=d>>>16&255,Bt[3]=d>>>24&255,n.check=w(n.check,Bt,4,0)),d=0,f=0,n.mode=D;case D:for(;f<16;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(Bt[0]=255&d,Bt[1]=d>>>8&255,n.check=w(n.check,Bt,2,0)),d=0,f=0,n.mode=M;case M:if(1024&n.flags){for(;f<16;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(Bt[0]=255&d,Bt[1]=d>>>8&255,n.check=w(n.check,Bt,2,0)),d=0,f=0}else n.head&&(n.head.extra=null);n.mode=F;case F:if(1024&n.flags&&(v=n.length,v>h&&(v=h),v&&(n.head&&(yt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),m.arraySet(n.head.extra,r,a,v,yt)),512&n.flags&&(n.check=w(n.check,r,v,a)),h-=v,a+=v,n.length-=v),n.length))break t;n.length=0,n.mode=H;case H:if(2048&n.flags){if(0===h)break t;v=0;do yt=r[a+v++],n.head&&yt&&n.length<65536&&(n.head.name+=String.fromCharCode(yt));while(yt&&v<h);if(512&n.flags&&(n.check=w(n.check,r,v,a)),h-=v,a+=v,yt)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=W;case W:if(4096&n.flags){if(0===h)break t;v=0;do yt=r[a+v++],n.head&&yt&&n.length<65536&&(n.head.comment+=String.fromCharCode(yt));while(yt&&v<h);if(512&n.flags&&(n.check=w(n.check,r,v,a)),h-=v,a+=v,yt)break t}else n.head&&(n.head.comment=null);n.mode=K;case K:if(512&n.flags){for(;f<16;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(d!==(65535&n.check)){t.msg="header crc mismatch",n.mode=dt;break}d=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Y;break;case q:for(;f<32;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}t.adler=n.check=i(d),d=0,f=0,n.mode=J;case J:if(0===n.havedict)return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=h,n.hold=d,n.bits=f,R;t.adler=n.check=1,n.mode=Y;case Y:if(e===B||e===C)break t;case G:if(n.last){d>>>=7&f,f-=7&f,n.mode=lt;break}for(;f<3;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}switch(n.last=1&d,d>>>=1,f-=1,3&d){case 0:n.mode=X;break;case 1:if(u(n),n.mode=nt,e===C){d>>>=2,f-=2;break t}break;case 2:n.mode=$;break;case 3:t.msg="invalid block type",n.mode=dt}d>>>=2,f-=2;break;case X:for(d>>>=7&f,f-=7&f;f<32;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){t.msg="invalid stored block lengths",n.mode=dt;break}if(n.length=65535&d,d=0,f=0,n.mode=Q,e===C)break t;case Q:n.mode=V;case V:if(v=n.length){if(v>h&&(v=h),v>l&&(v=l),0===v)break t;m.arraySet(s,r,a,v,o),h-=v,a+=v,l-=v,o+=v,n.length-=v;break}n.mode=Y;break;case $:for(;f<14;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(n.nlen=(31&d)+257,d>>>=5,f-=5,n.ndist=(31&d)+1,d>>>=5,f-=5,n.ncode=(15&d)+4,d>>>=4,f-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=dt;break}n.have=0,n.mode=tt;case tt:for(;n.have<n.ncode;){for(;f<3;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}n.lens[Ct[n.have++]]=7&d,d>>>=3,f-=3}for(;n.have<19;)n.lens[Ct[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,zt={bits:n.lenbits},xt=y(x,n.lens,0,19,n.lencode,0,n.work,zt),n.lenbits=zt.bits,xt){t.msg="invalid code lengths set",n.mode=dt;break}n.have=0,n.mode=et;case et:for(;n.have<n.nlen+n.ndist;){for(;Et=n.lencode[d&(1<<n.lenbits)-1],vt=Et>>>24,gt=Et>>>16&255,mt=65535&Et,!(vt<=f);){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(mt<16)d>>>=vt,f-=vt,n.lens[n.have++]=mt;else{if(16===mt){for(St=vt+2;f<St;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(d>>>=vt,f-=vt,0===n.have){t.msg="invalid bit length repeat",n.mode=dt;break}yt=n.lens[n.have-1],v=3+(3&d),d>>>=2,f-=2}else if(17===mt){for(St=vt+3;f<St;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}d>>>=vt,f-=vt,yt=0,v=3+(7&d),d>>>=3,f-=3}else{for(St=vt+7;f<St;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}d>>>=vt,f-=vt,yt=0,v=11+(127&d),d>>>=7,f-=7}if(n.have+v>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=dt;break}for(;v--;)n.lens[n.have++]=yt}}if(n.mode===dt)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=dt;break}if(n.lenbits=9,zt={bits:n.lenbits},xt=y(z,n.lens,0,n.nlen,n.lencode,0,n.work,zt),n.lenbits=zt.bits,xt){t.msg="invalid literal/lengths set",n.mode=dt;break}if(n.distbits=6,n.distcode=n.distdyn,zt={bits:n.distbits},xt=y(S,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,zt),n.distbits=zt.bits,xt){t.msg="invalid distances set",n.mode=dt;break}if(n.mode=nt,e===C)break t;case nt:n.mode=it;case it:if(h>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=h,n.hold=d,n.bits=f,k(t,p),o=t.next_out,s=t.output,l=t.avail_out,a=t.next_in,r=t.input,h=t.avail_in,d=n.hold,f=n.bits,n.mode===Y&&(n.back=-1);break}for(n.back=0;Et=n.lencode[d&(1<<n.lenbits)-1],vt=Et>>>24,gt=Et>>>16&255,mt=65535&Et,!(vt<=f);){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(gt&&0===(240&gt)){for(bt=vt,wt=gt,kt=mt;Et=n.lencode[kt+((d&(1<<bt+wt)-1)>>bt)],vt=Et>>>24,gt=Et>>>16&255,mt=65535&Et,!(bt+vt<=f);){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}d>>>=bt,f-=bt,n.back+=bt}if(d>>>=vt,f-=vt,n.back+=vt,n.length=mt,0===gt){n.mode=ht;break}if(32&gt){n.back=-1,n.mode=Y;break}if(64&gt){t.msg="invalid literal/length code",n.mode=dt;break}n.extra=15&gt,n.mode=rt;case rt:if(n.extra){for(St=n.extra;f<St;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=st;case st:for(;Et=n.distcode[d&(1<<n.distbits)-1],vt=Et>>>24,gt=Et>>>16&255,mt=65535&Et,!(vt<=f);){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(0===(240&gt)){for(bt=vt,wt=gt,kt=mt;Et=n.distcode[kt+((d&(1<<bt+wt)-1)>>bt)],vt=Et>>>24,gt=Et>>>16&255,mt=65535&Et,!(bt+vt<=f);){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}d>>>=bt,f-=bt,n.back+=bt}if(d>>>=vt,f-=vt,n.back+=vt,64&gt){t.msg="invalid distance code",n.mode=dt;break}n.offset=mt,n.extra=15&gt,n.mode=at;case at:if(n.extra){for(St=n.extra;f<St;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=dt;break}n.mode=ot;case ot:if(0===l)break t;if(v=p-l,n.offset>v){if(v=n.offset-v,v>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=dt;break}v>n.wnext?(v-=n.wnext,g=n.wsize-v):g=n.wnext-v,v>n.length&&(v=n.length),pt=n.window}else pt=s,g=o-n.offset,v=n.length;v>l&&(v=l),l-=v,n.length-=v;do s[o++]=pt[g++];while(--v);0===n.length&&(n.mode=it);break;case ht:if(0===l)break t;s[o++]=n.length,l--,n.mode=it;break;case lt:if(n.wrap){for(;f<32;){if(0===h)break t;h--,d|=r[a++]<<f,f+=8}if(p-=l,t.total_out+=p,n.total+=p,p&&(t.adler=n.check=n.flags?w(n.check,s,p,o-p):b(n.check,s,p,o-p)),p=l,(n.flags?d:i(d))!==n.check){t.msg="incorrect data check",n.mode=dt;break}d=0,f=0}n.mode=ut;case ut:if(n.wrap&&n.flags){for(;f<32;){if(0===h)break t;h--,d+=r[a++]<<f,f+=8}if(d!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=dt;break}d=0,f=0}n.mode=ct;case ct:xt=O;break t;case dt:xt=T;break t;case ft:return I;case _t:default:return L}return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=h,n.hold=d,n.bits=f,(n.wsize||p!==t.avail_out&&n.mode<dt&&(n.mode<lt||e!==E))&&c(t,t.output,t.next_out,p-t.avail_out)?(n.mode=ft,I):(_-=t.avail_in,p-=t.avail_out,t.total_in+=_,t.total_out+=p,n.total+=p,n.wrap&&p&&(t.adler=n.check=n.flags?w(n.check,s,p,t.next_out-p):b(n.check,s,p,t.next_out-p)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Y?128:0)+(n.mode===nt||n.mode===Q?256:0),(0===_&&0===p||e===E)&&xt===A&&(xt=P),xt)}function f(t){if(!t||!t.state)return L;var e=t.state;return e.window&&(e.window=null),t.state=null,A}function _(t,e){var n;return t&&t.state?(n=t.state,0===(2&n.wrap)?L:(n.head=e,e.done=!1,A)):L}function p(t,e){var n,i,r,s=e.length;return t&&t.state?(n=t.state,0!==n.wrap&&n.mode!==J?L:n.mode===J&&(i=1,i=b(i,e,s,0),i!==n.check)?T:(r=c(t,e,s,s))?(n.mode=ft,I):(n.havedict=1,A)):L}var v,g,m=n(12),b=n(16),w=n(17),k=n(23),y=n(24),x=0,z=1,S=2,E=4,B=5,C=6,A=0,O=1,R=2,L=-2,T=-3,I=-4,P=-5,Z=8,N=1,U=2,j=3,D=4,M=5,F=6,H=7,W=8,K=9,q=10,J=11,Y=12,G=13,X=14,Q=15,V=16,$=17,tt=18,et=19,nt=20,it=21,rt=22,st=23,at=24,ot=25,ht=26,lt=27,ut=28,ct=29,dt=30,ft=31,_t=32,pt=852,vt=592,gt=15,mt=gt,bt=!0;e.inflateReset=a,e.inflateReset2=o,e.inflateResetKeep=s,e.inflateInit=l,e.inflateInit2=h,e.inflate=d,e.inflateEnd=f,e.inflateGetHeader=_,e.inflateSetDictionary=p,e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e){"use strict";var n=30,i=12;t.exports=function(t,e){var r,s,a,o,h,l,u,c,d,f,_,p,v,g,m,b,w,k,y,x,z,S,E,B,C;r=t.state,s=t.next_in,B=t.input,a=s+(t.avail_in-5),o=t.next_out,C=t.output,h=o-(e-t.avail_out),l=o+(t.avail_out-257),u=r.dmax,c=r.wsize,d=r.whave,f=r.wnext,_=r.window,p=r.hold,v=r.bits,g=r.lencode,m=r.distcode,b=(1<<r.lenbits)-1,w=(1<<r.distbits)-1;t:do{v<15&&(p+=B[s++]<<v,v+=8,p+=B[s++]<<v,v+=8),k=g[p&b];e:for(;;){if(y=k>>>24,p>>>=y,v-=y,y=k>>>16&255,0===y)C[o++]=65535&k;else{if(!(16&y)){if(0===(64&y)){k=g[(65535&k)+(p&(1<<y)-1)];continue e}if(32&y){r.mode=i;break t}t.msg="invalid literal/length code",r.mode=n;break t}x=65535&k,y&=15,y&&(v<y&&(p+=B[s++]<<v,v+=8),x+=p&(1<<y)-1,p>>>=y,v-=y),v<15&&(p+=B[s++]<<v,v+=8,p+=B[s++]<<v,v+=8),k=m[p&w];n:for(;;){if(y=k>>>24,p>>>=y,v-=y,y=k>>>16&255,!(16&y)){if(0===(64&y)){k=m[(65535&k)+(p&(1<<y)-1)];continue n}t.msg="invalid distance code",r.mode=n;break t}if(z=65535&k,y&=15,v<y&&(p+=B[s++]<<v,v+=8,v<y&&(p+=B[s++]<<v,v+=8)),z+=p&(1<<y)-1,z>u){t.msg="invalid distance too far back",r.mode=n;break t}if(p>>>=y,v-=y,y=o-h,z>y){if(y=z-y,y>d&&r.sane){t.msg="invalid distance too far back",r.mode=n;break t}if(S=0,E=_,0===f){if(S+=c-y,y<x){x-=y;do C[o++]=_[S++];while(--y);S=o-z,E=C}}else if(f<y){if(S+=c+f-y,y-=f,y<x){x-=y;do C[o++]=_[S++];while(--y);if(S=0,f<x){y=f,x-=y;do C[o++]=_[S++];while(--y);S=o-z,E=C}}}else if(S+=f-y,y<x){x-=y;do C[o++]=_[S++];while(--y);S=o-z,E=C}for(;x>2;)C[o++]=E[S++],C[o++]=E[S++],C[o++]=E[S++],x-=3;x&&(C[o++]=E[S++],x>1&&(C[o++]=E[S++]))}else{S=o-z;do C[o++]=C[S++],C[o++]=C[S++],C[o++]=C[S++],x-=3;while(x>2);x&&(C[o++]=C[S++],x>1&&(C[o++]=C[S++]))}break}}break}}while(s<a&&o<l);x=v>>3,s-=x,v-=x<<3,p&=(1<<v)-1,t.next_in=s,t.next_out=o,t.avail_in=s<a?5+(a-s):5-(s-a),t.avail_out=o<l?257+(l-o):257-(o-l),r.hold=p,r.bits=v}},function(t,e,n){"use strict";var i=n(12),r=15,s=852,a=592,o=0,h=1,l=2,u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,_,p,v,g,m){var b,w,k,y,x,z,S,E,B,C=m.bits,A=0,O=0,R=0,L=0,T=0,I=0,P=0,Z=0,N=0,U=0,j=null,D=0,M=new i.Buf16(r+1),F=new i.Buf16(r+1),H=null,W=0;for(A=0;A<=r;A++)M[A]=0;for(O=0;O<_;O++)M[e[n+O]]++;for(T=C,L=r;L>=1&&0===M[L];L--);if(T>L&&(T=L),0===L)return p[v++]=20971520,p[v++]=20971520,m.bits=1,0;for(R=1;R<L&&0===M[R];R++);for(T<R&&(T=R),Z=1,A=1;A<=r;A++)if(Z<<=1,Z-=M[A],Z<0)return-1;if(Z>0&&(t===o||1!==L))return-1;for(F[1]=0,A=1;A<r;A++)F[A+1]=F[A]+M[A];for(O=0;O<_;O++)0!==e[n+O]&&(g[F[e[n+O]]++]=O);if(t===o?(j=H=g,z=19):t===h?(j=u,D-=257,H=c,W-=257,z=256):(j=d,H=f,z=-1),U=0,O=0,A=R,x=v,I=T,P=0,k=-1,N=1<<T,y=N-1,t===h&&N>s||t===l&&N>a)return 1;for(var K=0;;){K++,S=A-P,g[O]<z?(E=0,B=g[O]):g[O]>z?(E=H[W+g[O]],B=j[D+g[O]]):(E=96,B=0),b=1<<A-P,w=1<<I,R=w;do w-=b,p[x+(U>>P)+w]=S<<24|E<<16|B|0;while(0!==w);for(b=1<<A-1;U&b;)b>>=1;if(0!==b?(U&=b-1,U+=b):U=0,O++,0===--M[A]){if(A===L)break;A=e[n+g[O]]}if(A>T&&(U&y)!==k){for(0===P&&(P=T),x+=R,I=A-P,Z=1<<I;I+P<L&&(Z-=M[I+P],!(Z<=0));)I++,Z<<=1;if(N+=1<<I,t===h&&N>s||t===l&&N>a)return 1;k=U&y,p[k]=T<<24|I<<16|x-v|0}}return 0!==U&&(p[x+U]=A-P<<24|64<<16|0),m.bits=T,0}},function(t,e){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=n},function(t,e){t.exports={name:"carina",version:"0.5.0",description:"A NodeJS and Browser compatible client for Beam.pro's constellation socket.",main:"lib/index.js",typings:"lib/index.d.ts",scripts:{"build:ts":"rm -rf lib && tsc && tsc -d","build:webpack":"rm -rf dist && webpack && webpack --config webpack.config.min.js",build:"npm run build:ts && npm run build:webpack",test:"npm run build:ts && mocha -r test/_setup.js",prepublish:"npm run build"},repository:{type:"git",url:"git+https://github.com/WatchBeam/carina.git"},keywords:["Constellation","Beam"],author:"James Birtles <jameshb@beam.pro>",license:"MIT",bugs:{url:"https://github.com/WatchBeam/carina/issues"},homepage:"https://github.com/WatchBeam/carina#readme",devDependencies:{"@types/es6-shim":"0.0.31","@types/node":"^6.0.38","@types/pako":"^0.2.30","awesome-typescript-loader":"^2.2.4",chai:"^3.5.0","chai-subset":"^1.3.0","json-loader":"^0.5.4",mocha:"^3.0.2",sinon:"^1.17.5","sinon-chai":"^2.8.0",typescript:"^2.0.0",webpack:"^1.13.1",ws:"^1.1.1"},dependencies:{pako:"^1.0.3"}}}])});
//# sourceMappingURL=carina.min.js.map